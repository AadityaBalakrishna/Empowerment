	Method:

	@Transactional(readOnly = true)
	Optional<SpsCirrusContactMetadata> findTopByUserAccountGuidOrderByUpdatedDateDescMetadataIdDesc(UUID userAccountGuid);

	default Optional<Integer> findLatestHashByUserAccountGuid(UUID userAccountGuid) {
		return findTopByUserAccountGuidOrderByUpdatedDateDescMetadataIdDesc(userAccountGuid)
				.map(SpsCirrusContactMetadata::getHashValue);
	}

test class:
	@Test
	public void testFindLatestHashByUserAccountGuid_MultipleRecords() {
		UUID specificUser = UUID.randomUUID();

		repository.deleteAll();

		// Insert multiple records for the same userAccountGuid
		SpsCirrusContactMetadata record1 = new SpsCirrusContactMetadata();
		record1.setUserAccountGuid(specificUser);
		record1.setPersonaId(UUID.randomUUID());
		record1.setHashValue(100);
		record1.setUpdatedDate(new Date(System.currentTimeMillis() - 10000)); // 10 seconds ago
		repository.save(record1);

		SpsCirrusContactMetadata record2 = new SpsCirrusContactMetadata();
		record2.setUserAccountGuid(specificUser);
		record2.setPersonaId(UUID.randomUUID());
		record2.setHashValue(200);
		record2.setUpdatedDate(new Date(System.currentTimeMillis())); // Most recent
		repository.save(record2);

		entityManager.flush();
		entityManager.clear();

		// Call the method under test
		Optional<Integer> latestHash = repository.findLatestHashByUserAccountGuid(specificUser);

		// Verify the result
		Assertions.assertTrue(latestHash.isPresent(), "Latest hash should be found");
		Assertions.assertEquals(200, latestHash.get(), "Should return the hash from the most recently updated record");
	}

error:
16:36:55  [INFO] Running com.personalcapital.salesforce.sps.SpsCirrusContactMetadataRepositoryTest
16:36:57  [ERROR] Tests run: 9, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.409 s <<< FAILURE! -- in com.personalcapital.salesforce.sps.SpsCirrusContactMetadataRepositoryTest
16:36:57  [ERROR] com.personalcapital.salesforce.sps.SpsCirrusContactMetadataRepositoryTest.testFindLatestHashByUserAccountGuid_MultipleRecords -- Time elapsed: 0.045 s <<< FAILURE!
16:36:57  org.opentest4j.AssertionFailedError: Should return the hash from the most recently updated record ==> expected: <200> but was: <100>
