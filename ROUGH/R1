persistenceApplicationContext.xml:
<?xml version="1.0" encoding="UTF-8"?>
<beans default-lazy-init="true" xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd"
	   xmlns:context="http://www.springframework.org/schema/context">

	<import resource="file:${TEST_CONFIG_HOME}/spring/sp-base-test.xml" />

	<import resource="classpath:pcap-data-agent.xml" />
	<import resource="classpath:pcap-dao.xml" />
	<import resource="classpath:account-api-client.xml" />


	<bean id="redissonConfiguration" class="com.personalcapital.cache.config.RedissonConfiguration">
		<property name="enabled" value="true" />
	</bean>
	<!-- To make sure cryptEngine is not mocked for this test context -->
	<import resource="classpath*:sp-security.xml"/>
	<bean id="applicationContextProvider" class="com.personalcapital.context.ApplicationContextProvider" />

	<bean id="tagDao" class="com.personalcapital.user.data.impl.TagDaoImpl"/>
	<bean id="userDao" class="com.safepage.user.data.impl.UserDaoImpl" />
	<bean id="userTagDao" class="com.personalcapital.user.data.impl.UserTagDaoImpl" />
	<context:component-scan base-package="com.empower.epw.repository, com.empower.epw.config" />
</beans>


sp-base-test.xml:
<?xml version="1.0" encoding="UTF-8"?>
<beans default-lazy-init="true" xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans.xsd http://www.mockito.org/spring/mockito http://www.mockito.org/spring/mockito.xsd"
	   xmlns:mockito="http://www.mockito.org/spring/mockito">

	<mockito:mock id="spExecutor" class="com.safepage.thread.SafePageExecutor"/>
	<mockito:mock id="cryptEngine" class="com.safepage.security.CryptEngine" />

	<import resource="file:${TEST_CONFIG_HOME}/spring/sp-config-test.xml"/>
	<!-- Does not include read only connection -->
	<import resource="file:${TEST_CONFIG_HOME}/spring/sp-data-test.xml"/>
	<import resource="classpath:pcap-cache-bean.xml" />
	
	<import resource="classpath:sp-core-user-data.xml" />
	<import resource="classpath:sp-core-site-data.xml" />
	<import resource="file:${TEST_CONFIG_HOME}/spring/sp-data-security-test.xml" />
	
	<bean name="serverConfigurer" class="com.personalcapital.config.ServerConfigurer">
		<property name="tenant" value="${server.tenant}" />
		<property name="baseURL" value="${server.baseURL}" />
		<property name="cmsServerURL" value="${server.cmsServerURL}" />
		<property name="adminBaseURL" value="${server.adminBaseURL}" />
		<property name="referralURL" value="${server.referralURL}" />
		<property name="clientReferralURL" value="${server.clientReferralURL}" />
		<property name="systemSalt" value="${pcap.systemSalt}" />
		<property name="googleCaptchaSiteKey" value="${google.recaptcha.SiteKey}" />
        <property name="mixpanelToken" value="${mixpanel.token}" />
		<property name="staticURL" value="${server.staticURL}" />
	</bean>
</beans>

pcap-data-agent.xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans
			http://www.springframework.org/schema/beans/spring-beans.xsd">

	<!-- for advisor app -->
	<bean id="ssoGroupRoleTypeDao" class="com.personalcapital.role.data.impl.SsoGroupRoleTypeDaoImpl" />
	<bean id="roleTypeDao" class="com.personalcapital.role.data.impl.RoleTypeDaoImpl" />
    <bean id="agentRoleHelper" class="com.safepage.data.util.AgentRoleHelper" />
</beans>

pcap-dao.xml:
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
			http://www.springframework.org/schema/beans
			http://www.springframework.org/schema/beans/spring-beans.xsd
			http://www.springframework.org/schema/aop
			http://www.springframework.org/schema/aop/spring-aop.xsd">
	<bean id="yodleeOrganizationDao" class="com.personalcapital.sync.dao.impl.YodleeOrganizationDaoImpl" />
	<bean id="organizationOverrideDao" class="com.personalcapital.sync.dao.impl.OrganizationOverrideDaoImpl" />
	<bean id="siteOverrideDao" class="com.personalcapital.sync.dao.impl.SiteOverrideDaoImpl" />
	<bean id="productOverrideDao" class="com.personalcapital.sync.dao.impl.ProductOverrideDaoImpl" />
	<bean id="yodleeSiteContentServiceDao" class="com.personalcapital.sync.dao.impl.YodleeSiteContentServiceDaoImpl" />
	<bean id="yodleeSiteContentServiceStgDao" class="com.personalcapital.sync.dao.impl.YodleeSiteContentServiceStgDaoImpl" />
	<bean id="yodleeContentServiceStgDao" class="com.personalcapital.sync.dao.impl.YodleeContentServiceStgDaoImpl" />
	<aop:aspectj-autoproxy />
</beans>

sp-security.xml:
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
			http://www.springframework.org/schema/beans/spring-beans.xsd
			http://www.springframework.org/schema/aop
			http://www.springframework.org/schema/aop/spring-aop.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context.xsd">

    <aop:aspectj-autoproxy/>
    <context:annotation-config/>

    <context:component-scan base-package="com.empower.epw.persistence.config.spschema"/>
    <context:component-scan base-package="com.empower.epw.persistence.config.security"/>

</beans>
