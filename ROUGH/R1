package com.empower.epw.crm.gateway.sqs;

import org.springframework.stereotype.Service;

import lombok.CustomLog;

@CustomLog
@Service
public class CrmProcessingService
{

	public void processMessage(String type, String message, String messageId)
	{
		log.info("Received from [{}] queue type, message [ID: {}]: {}", type,
				messageId != null ? messageId : "NA", message);

		try
		{
			// TODO: handle domain logic here
			if ("FAIL_MESSAGE".equals(message))
			{
				throw new RuntimeException("Test failure message to trigger retry");
			}
			log.info("Message from queue type [{}] processed successfully.", type);
		}
		catch (Exception ex)
		{
			log.error("Error processing [{}] message: {}, {}", type, ex.getMessage(), ex);
			throw ex; // triggers @Retryable
		}
	}

	public void recoverFailedMessages(Exception e, String message, String messageId)
	{
		log.info("All retries failed for message [ID: {}]: {}, error: {}",
				messageId != null ? messageId : "NA", message, e.getMessage());
		// TODO: save failure
	}
}

then what happens to this code?

can tou go through all the files of this project that you have stored in the chat and see to it that, everything is algned to what is happeing?
