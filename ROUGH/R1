package com.mypersonal.aexpconfig.controller;

import org.springframework.context.ApplicationContext;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.Arrays;
import java.util.List;

@RestController
public class StarterBeanController {

    private final ApplicationContext context;

    public StarterBeanController(ApplicationContext context) {
        this.context = context;
    }

    @GetMapping("/starter/beans")
    public List<String> getStarterBeans() {
        return Arrays.stream(context.getBeanDefinitionNames())
                .filter(name -> context.getBean(name).getClass().getPackageName()
                        .startsWith("com.empower.epw.starter.config.store"))
                .map(name -> name + " -> " + context.getBean(name).getClass().getName())
                .toList();
    }
}
