@Test
void testDecryptValueThrowsExceptionWhenCiphertextIsInvalid() {
    String invalidCiphertext = "not-base64-or-kms-data";

    SafePageException exception = assertThrows(
            SafePageException.class,
            () -> epwKmsService.decryptUsingAWSKey(invalidCiphertext)
    );

    assertEquals(SafePageErrorType.INVALID_INPUT, exception.getErrorType());
    assertTrue(exception.getMessage().contains("Base64"));
}
