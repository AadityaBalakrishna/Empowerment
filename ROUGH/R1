in SpsCirrusContactMetadataRepository.java

@Modifying
	@Transactional(readOnly = true)
	@Query("UPDATE sp_schema.sps_cirrus_contact_metadata registration_status = :status WHERE user_account_guid = :userAccountGuid AND persona_id = :personaId")
	int setStatus(@Param("userAccountGuid") UUID userAccountGuid, @Param("personaId") UUID personaId,
                  @Param("status") String registrationStatus);


reviews:
review 1 ---> You cannot have @Transactional(readOnly = true) on method that is also annotated with Modifying. Please delete (readOnly = true)

review 2:
JPQL update must use the entity name, not the table.
You forgot the keyword SET.
readOnly = true on a modifying query is contradictory.
Status should be your enum, not String.
@Modifying(clearAutomatically = true, flushAutomatically = true)
@Transactional
@Query("update SpsCirrusContactMetadata m set m.registrationStatus = :status " +
"where m.userAccountGuid = :userAccountGuid and m.personaId = :personaId")
int setStatus(@Param("userAccountGuid") UUID userAccountGuid,
@Param("personaId") UUID personaId,
@Param("status") RegistrationStatus registrationStatus);

