PHASE 1:
1) PLAT-7913: pcap-common out  - COMPLETED 
             Current state 

	

  Desired state



 
	




User Story points:
Jira link: 
Done for both release/2.7 and release/3.0 branches
move pcap-common code to pcap-common-data with git history and  create MR. verify the build and test cases. Create the MR and merge it.
Clean up pcap-common code and add pcap-common-data dependency in pcap-common and verify MR in pcap-server jenkins. 
Verify Client side apps are running without any issues like in apps-common, fp etc
Info replace of pcap-common to pcap-common-data artifacts. once consumer side clean pcap-common and used pcap-common-data.
Delete the pcap-common module in pcap-server.

 Issues:
All pcap-server/pcap-common module files moved to pcap-common-data repo. please add below dependency instead of pcap-common artifact.

<dependency>
    <groupId>com.personalcapital</groupId>
    <artifactId>pcap-common-data</artifactId>
</dependency>




2) PLAT-7915: sp-common out 


User story points:

Jira link: 
Done  for both release/2.7 and release/3.0 branches
In this modules check the each class and verify is any common enum classes and util classes are there then move to pcap-common-data repo from sp-common,pcap-cache and pcap-data.
Create new repo and move the modules sp-common,pcap-cache,pcap-data with history to new repo.
Build and run the test cases with other pcap-server modules with dependencies versions.
example:- now sp-common used pcap-config-release-snapshot after moving to new repo sp-common going to use pcap-config-3.0.284.jar
groupId, artifactId will be change after moving to new repos
       from <groupId>com.personalcapital</groupId> to <groupId>com.empower.epw</groupId>
       from <artifactId>module-name</artifactId> to <artifactId>module-name</artifactId>
To generate new artifacts, 1st time the pcap-server current git Tag number(git Tag version) will configure and will publish next increment version artifacts and revert the change.
After published new artifacts, For new repo need to add configurations in jenkins pipeline to publish artifacts like similar way of pcap-server increment logic.
ApplicationContextProvider file moved to pcap-platform/pcap-platform-common.
cache package files moved to platform repo as new module pcap-platform-common-caching-commons
QA testing scope:-  
 New artifacts need to verify in consumer side apps. impact list for other components like pcap-apps-common, fp,ace...
Issues:
 1) /home/jenkins/agent/workspace/uild_common_pcap-server_MR-28198/tmp/pcap-agent/pcap-agent-app/src/main/java/com/personalcapital/advisor/web/context/WebAppContextConfig.java:[4,34] error: cannot find symbol
symbol:   class ApplicationContextProvider
location: package com.personalcapital.context
solution:
use pcap-platform-common version 2.6.365 or latest for release/2.7 branches
use pcap-platform-common version 3.0.43 or latest for release/3.0 branches




3) PLAT-7916: pcap-common-webservice → COMPLETED 

           User story points:

Jira link: 
Done for both release/2.7 and release/3.0 branches
move this module to pcap-vendor-clients repo. 
Note:- move the files with history.
don't change the package structure.
verify any impact in consumer side after moving to pcap-vendor-clients and fix the issues.
QA testing scope:-  
 New artifacts need to verify in consumer side apps.
issues:-
All pcap-server/pcap-common-webservice module files moved to pcap-vendor-clients repo. please add below dependency.
Note:- groupId got changed to com.empower.epw

<dependency>
    <groupId>com.empower.epw</groupId>
    <artifactId>pcap-common-webservice</artifactId>
    <version>${pcap-vendor-clients.version}</version>
</dependency>


4) PLAT-7917: pcap-cache 

           User story points:

Jira link: 
Done for both release/2.7 and release/3.0 branches
In this module check each class and verify if any enum classes and util classes are present, then move to pcap-common-data repo from pcap-cache with latest commit link in the commit message.
move rest of the files from this module to new repo created.
Note:- Make sure the file isn't tightly coupled with other modules and doesn't have cyclic dependencies, move the files with latest commit link.
don't change the package structure.
verify any impact in consumer side after moving to new repo and fix the issues.

QA testing scope:-  
 New artifacts need to verify in consumer side apps.




5) PLAT-7918: sp-security 

           User story points:

Jira link: 
Done for both release/2.7 and release/3.0 branches
In this module check each class and verify if any independent enum and util classes are present, then move to pcap-common-data repo from sp-security with latest commit link in the commit message, the commit links can be accessed through the MR commits
move rest of the files from this module to pcap-platform repo, and for sp-schema related files need to be within the pcap-server repo itself.
Note:- Make sure the file isn't tightly coupled with other modules and doesn't have cyclic dependencies, move the files with latest commit link.
don't change the package structure. 
verify any impact in consumer side after moving to new repo and fix the issues.
All pcap-server/sp-security module files moved to pcap-platform repo. please add below dependency.
Note:- groupId got changed to com.empower.epw

<dependency>
    <groupId>com.empower.epw</groupId>
    <artifactId>sp-security</artifactId>
    <version>${platform.version}</version>
</dependency>


Issues:
6 files SpSecurityDataSourceConfig.java, SpSchemaDataSourceConfig.java, SpSchemaReaderDataSourceProperties.java, 
SpSchemaWriterDataSourceProperties.java, PcapRoutingDataSourceConfig.java, KeySeedDaoImpl.java could not be moved to sp-data module as it causes cyclic errors


QA testing scope:-  
 New artifacts need to verify in consumer side apps.





6) PLAT-7914: pcap-config 

           User story points:

Jira link: 
Move this module to pcap-platform repo.
Done for for both release/2.7 and release/3.0 branches
Note:- add last commit link Merge requests for release/2.7 and release/3.0 branches
don't change the package structure.
verify any impact in consumer side after moving to pcap-platform and fix the issues.
All pcap-server/pcap-config module files moved to pcap-platform repo. please add below dependency.
Note:- groupId got changed to com.empower.epw

<dependency>
    <groupId>com.empower.epw</groupId>
    <artifactId>pcap-config</artifactId>
    <version>${platform.version}</version>
</dependency>
test-jar
<dependency>
    <groupId>com.empower.epw</groupId>
    <artifactId>pcap-config</artifactId>
    <version>${platform.version}</version>
    <classifier>tests</classifier>
    <type>test-jar</type>
    <scope>test</scope>
</dependency>
                        Issues:-    

                         1) After pcap-server clean up MRs merge the mv-service, fp-service, jobs-service and cstdn-service apps failed.

                            root cause pcap-server modules added pcap-config as transitive dependency which added epw.pcap-config-test jar in final app jar, causing startup issue  

 fix planned:- for backward compatibility add only com.empower.epw/pcap-config dependency in pcap-server/pcap-config pom file. existing consumers no impact.
for consumers who used pcap.pcap-config-test jar need MR for changing epw.pcap-config-tests jar. pcap-snap, pcap-transaction, pcap-ace, pcap-appointment-service, empower-rpp-investment,pcap-sitesearch and pcap-server repos used pcap.pcap-config-tests jar

QA testing scope:-  
 New artifacts need to verify in consumer side apps.




7) PLAT-7919: pcap-rest-common → COMPLETED 

           User story points:

Jira link: 
Done for for both release/2.7 and release/3.0 branches
Move this module to pcap-platform.
Note:- add last commit link Merge requests for release/2.7 and release/3.0 branches
don't change the package structure.
verify any impact in consumer side after moving to pcap-platform and fix the issues.
All pcap-server/pcap-rest-common module files moved to pcap-platform repo. please add below dependency.
Note:- groupId changed to com.empower.epw

<dependency>
    <groupId>com.empower.epw</groupId>
    <artifactId>pcap-rest-common</artifactId>
    <version>${platform.version}</version>
</dependency>
QA testing scope:-  
 New artifacts need to verify in consumer side apps.




8) PLAT-8240: pcap-command → COMPLETED

           User story points:

Jira link: 

Only 2 enum files have been moved to pcap-common-data : QueueDispat‎chType.java‎ and QueueSta‎tus.java‎
Rest of the files moved to : pcap-batch (done for both release/2.7 and release/3.0 branches)
Note:- add last commit link Merge requests for release/2.7 and release/3.0 branches
Note:- groupId changed to com.empower.epw

<dependency>
    <groupId>com.empower.epw</groupId>
    <artifactId>pcap-command</artifactId>
    <version>${pcap-batch.version}</version>
</dependency>
QA testing scope:-  
 New artifacts need to verify in consumer side apps.
Consumer side Clean Up:-
Jira link: 
9) PLAT-12555: Move/reshuffle pcap-core-services/pcap-credentials/pcap-planning out
1) Move pcap-core-services out for both release/2.7 and release/3.0 branches

 User story points:

Jira link: 
In this module check each class and verify if any common enum classes and util classes are present, then move to pcap-common-data repo from pcap-core-services.
Note:- move the files with history.
don't change the package structure.
verify any impact in consumer side after moving to pcap-common-data and fix the issues.
QA testing scope:-  
 New artifacts need to verify in consumer side apps.



	
	Main	Test	Test framework	Total
Overall	TOTAL	201	121	3	325
Utils/Enums
(Destination: pcap-common-data)	TOTAL	33	15	-	48
Moved	11	1	-	12
Pending	22	14	-	36
Others
(Destination: ?)	TOTAL	168	106	3	277
Moved	
	
	
	

Pending	168	106	3	277
2) Move pcap-credentials out for both release/2.7 and release/3.0 branches

 User story points:

Jira link:
IMove the entire module to pcap-apps-common.
Note:- move the files with history.
don't change the package structure.
verify any impact in consumer side after moving to pcap-batch and fix the issues.
QA testing scope:-  
 New artifacts need to verify in consumer side apps.

3) Move pcap-planning out for both release/2.7 and release/3.0 branches

           User story points:

Jira link:
In this module check each class and verify if any common enum classes and util classes are present, then move to pcap-common-data repo from pcap-planning.
Note:- move the files with history.
don't change the package structure.
verify any impact in consumer side after moving to pcap-batch and fix the issues.
QA testing scope:-  
 New artifacts need to verify in consumer side apps.
Queries/Doubts:-  
 1) Out of 95 files present in this module, the below has been proposed as the destination repos for valuestream specific files:
There are only 9 files (independent enum) which can be moved to pcap-common-data, should it be moved?
what is the fate of rest of the 86 files in this module?




points discussed/proposed:-
points discussed: pcap-server 2.7 will be soon out of usage & out of sync, so backward sync may not need - as Anuj told the above changes want to do in both release/2.7 and release/3.0 branches to get consistent changes and good practice in development. so we are doing changes in release/2.7 branch as well.
commit history of files not moving Instead last history commit link of file adding in MR commit msg to hold history details.
pcap-server downstream app pcap-agent build failed with release/2.7 branch. root cause is in pcap-agent repo release/2.7 branch deleted and rename to release/2.7-backup-5/5/25.  So as Anuj suggested, in pcap-server jenkinsfile.eks file default branch change to release/2.7-backup-5/5/25 for pcap-agent builds.
https://pcapeks-jenkins.pcapcloud.com/job/server/job/build/job/common/job/pcap-server/job/release%252F2.7/1089/
https://gitlab.retirementpartner.com/pwt-cloud-platform/pcap-server/-/merge_requests/28301/diffs
 release/2.7 recreated in pcap-agent and reverted the above MR. https://gitlab.retirementpartner.com/pwt-cloud-platform/pcap-server/-/merge_requests/28306/diffs



MOM from meet with Anuj on 13/05/2025 at 6:30 PM IST regarding "pcap-server-decomposition"

        Final decision on modules mentioned in ticket PLAT-7422:

sp-security --> Good to move to pcap-security module in pcap-platform for the rest of the files and for SpSchemaDataSourceConfig classes, can be moved to sp-data module of the same pcap-server repo
pcap-cache --> to be moved to new repo
pcap-command --> to be moved entirely to pcap-batch
pcap-planning --> to moved entirely to fp
pcap-core-services --> Need to analyze every file and make a note on each class where it is used in other valuestreams repos. eg: if it is used in ace repo then it is good to be moved only if it is independent to that
pcap-credentials --> to be moved entirely to pcap-apps-common

      Once the above mentioned modules have been moved out, the next set of modules that can be taken up are:

pcap-webversion-service --> to be moved entirely to pcap-apps-common
pcap-planning-common --> to moved entirely to fp
pcap-frontapp --> to be moved entirely to pcap-apps-common
pcap-weka --> to be moved entirely to pcap-platform
pcap-analytics-dao --> to be moved entirely to pcap-platform
pcap-service-client --> Needs to be analysed file by file, if used, move into pcap-rest-common which was moved into pcap-platform else if not used, the entire module can be deleted after validation

All the modules will be moved to the mentioned repositories with their independent enum/util files moved to pcap-common-data

→ Jira link: 

→ Details of all the MRs involved and the new location of the files moved: pcap-server-decomposition.xlsx




any way to rearrange and make this document more informative or more appealing or concise? i want to reduce redundant information and make this document look quickly informative
